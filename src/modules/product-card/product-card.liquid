{% assign class = class | default: false %}
{% assign id = id | default: false %}
{% assign options = options | default: false %}
{% assign options_by_name = options_by_name | default: false %}
{% assign title = title | default: false %}
{% assign price = price | default: false %}
{% capture class %}product-card{% if class %} {{- class -}}{% endif %}{% endcapture %}
{% if button_class_custom %}
  {%- assign button_class = button_class | append: ' ' | append: button_class_custom -%}
{% endif %}
{%- assign button_class = button_class | append: ' js-form-submit' -%}

<section class="{{ class }}" data-module="product-card">
  <div class="product-card__inner">
    <div class="product-card__header">
      <div class="product-card__image-container">
        <a href="#" class="product-card__image-link">
          {%- render 'image', src: image_src -%}
        </a>
      </div>
      <div class="product-card__overlay js-overlay">
        <div class="product-card__quick-shop">
          {%- render 'button', button_url: button_url, button_value: 'Quick Shop', tag: 'button', custom_attrs: 'type="submit"' class: 'product-card__quick-shop-btn button--light js-button' -%}
        </div>
        <form method="post" action="/cart/add" class="product-card__form">
          <button class="product-card__close js-close" type="button">
            {%- render 'svg', type: 'close', class: 'product-card__close-icon' -%}
          </button>
          <div class="product-card__options">
            {%- for option in options -%}
              {%- assign option_index = forloop.index -%}
              <div class="product-card__option product-card__option--{{- option | handle -}}">
                <div class="product-card__option-values">
                  {%- for value in options_by_name[option].values -%}
                    {%- capture input_name -%}product-{{- id -}}-option-{{- option | handle -}}{%- endcapture -%}
                    {%- capture input_id -%}product-{{- id -}}-option-{{- option | handle -}}-value-{{- value | handle -}}{%- endcapture -%}
                    <div class="product-card__option-value">
                      <input id="{{- input_id -}}" type="radio" name="{{- input_name -}}" class="radio product-card__option-value-input js-product-input" value="{{- value -}}" data-option-index="{{- option_index -}}">
                      <label for="{{- input_id -}}" class="label label--radio product-card__option-value-label">
                        {% render 'svg', type: 'logo', class: 'product-card__option-value-icon' %}
                        {{- value -}}
                      </label>
                    </div>
                  {%- endfor -%}
                </div>
              </div>
            {%- endfor -%}
          </div>
          <select name="id" class="product-card__variants js-product-variants">
            <option value selected disabled>Variant</option>
            {%- for variant in product.variants -%}
              <option value="{{- variant.id -}}" data-title="{{- variant.title -}}">{{- variant.title -}}</option>
            {%- endfor -%}
          </select>
          <input type="hidden" name="quantity" value="1">
          {%- render 'button', button_url: button_url, button_value: 'Add To Cart', tag: 'button', custom_attrs: 'type="submit" disabled' class: button_class -%}
        </form>
      </div>
    </div>
    <div class="product-card__content">
      <h4 class="b1 product-card__title">{{ title }}</h4>
      <div class="b1 product-card__review">Review</div>
      <p class="h5 product-card__price">{{ price }}</p>
    </div>
  </div>
</section>
